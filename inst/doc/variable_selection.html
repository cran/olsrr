<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Variable Selection Methods</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Variable Selection Methods</h1>



<style type="text/css">
#best-subset-regression pre { 
font-size: 10px
}
</style>
<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>Variable selection refers to the process of choosing the most
relevant variables to include in a regression model. They help to
improve model performance and avoid over fitting.</p>
<p>Before we explore stepwise selection methods, let us take a quick
look at all/best subset regression. As they evaluate every possible
variable combination, these methods are computationally intensive and
may crash your system if used with a large set of variables. We have
included them in the package purely for educational purpose.</p>
<div id="all-possible-regression" class="section level3">
<h3>All Possible Regression</h3>
<p>All subset regression tests all possible subsets of the set of
potential independent variables. If there are K potential independent
variables (besides the constant), then there are <span class="math inline">\(2^{k}\)</span> distinct subsets of them to be
tested. For example, if you have 10 candidate independent variables, the
number of subsets to be tested is <span class="math inline">\(2^{10}\)</span>, which is 1024, and if you have 20
candidate variables, the number is <span class="math inline">\(2^{20}\)</span>, which is more than one
million.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">lm</span>(mpg <span class="sc">~</span> disp <span class="sc">+</span> hp <span class="sc">+</span> wt <span class="sc">+</span> qsec, <span class="at">data =</span> mtcars)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">ols_step_all_possible</span>(model)</span></code></pre></div>
<pre><code>##    Index N      Predictors  R-Square Adj. R-Square Mallow&#39;s Cp
## 3      1 1              wt 0.7528328     0.7445939   12.480939
## 1      2 1            disp 0.7183433     0.7089548   18.129607
## 2      3 1              hp 0.6024373     0.5891853   37.112642
## 4      4 1            qsec 0.1752963     0.1478062  107.069616
## 8      5 2           hp wt 0.8267855     0.8148396    2.369005
## 10     6 2         wt qsec 0.8264161     0.8144448    2.429492
## 6      7 2         disp wt 0.7809306     0.7658223    9.879096
## 5      8 2         disp hp 0.7482402     0.7308774   15.233115
## 7      9 2       disp qsec 0.7215598     0.7023571   19.602810
## 9     10 2         hp qsec 0.6368769     0.6118339   33.472150
## 14    11 3      hp wt qsec 0.8347678     0.8170643    3.061665
## 11    12 3      disp hp wt 0.8268361     0.8082829    4.360702
## 13    13 3    disp wt qsec 0.8264170     0.8078189    4.429343
## 12    14 3    disp hp qsec 0.7541953     0.7278591   16.257790
## 15    15 4 disp hp wt qsec 0.8351443     0.8107212    5.000000</code></pre>
</div>
<div id="best-subset-regression" class="section level3">
<h3>Best Subset Regression</h3>
<p>Select the subset of predictors that do the best at meeting some
well-defined objective criterion, such as having the largest R2 value or
the smallest MSE, Mallow’s Cp or AIC.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">lm</span>(mpg <span class="sc">~</span> disp <span class="sc">+</span> hp <span class="sc">+</span> wt <span class="sc">+</span> qsec, <span class="at">data =</span> mtcars)</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="fu">ols_step_best_subset</span>(model)</span></code></pre></div>
<pre><code>##    Best Subsets Regression    
## ------------------------------
## Model Index    Predictors
## ------------------------------
##      1         wt              
##      2         hp wt           
##      3         hp wt qsec      
##      4         disp hp wt qsec 
## ------------------------------
## 
##                                                    Subsets Regression Summary                                                    
## ---------------------------------------------------------------------------------------------------------------------------------
##                        Adj.        Pred                                                                                           
## Model    R-Square    R-Square    R-Square     C(p)        AIC        SBIC        SBC         MSEP       FPE       HSP       APC  
## ---------------------------------------------------------------------------------------------------------------------------------
##   1        0.7528      0.7446      0.7087    12.4809    166.0294    74.2916    170.4266    296.9167    9.8572    0.3199    0.2801 
##   2        0.8268      0.8148      0.7811     2.3690    156.6523    66.5755    162.5153    215.5104    7.3563    0.2402    0.2091 
##   3        0.8348      0.8171       0.782     3.0617    157.1426    67.7238    164.4713    213.1929    7.4756    0.2461    0.2124 
##   4        0.8351      0.8107       0.771     5.0000    159.0696    70.0408    167.8640    220.8882    7.9497    0.2644    0.2259 
## ---------------------------------------------------------------------------------------------------------------------------------
## AIC: Akaike Information Criteria 
##  SBIC: Sawa&#39;s Bayesian Information Criteria 
##  SBC: Schwarz Bayesian Criteria 
##  MSEP: Estimated error of prediction, assuming multivariate normality 
##  FPE: Final Prediction Error 
##  HSP: Hocking&#39;s Sp 
##  APC: Amemiya Prediction Criteria</code></pre>
</div>
</div>
<div id="stepwise-selection" class="section level2">
<h2>Stepwise Selection</h2>
<p>Stepwise regression is a method of fitting regression models that
involves the iterative selection of independent variables to use in a
model. It can be achieved through forward selection, backward
elimination, or a combination of both methods. The forward selection
approach starts with no variables and adds each new variable
incrementally, testing for statistical significance, while the backward
elimination method begins with a full model and then removes the least
statistically significant variables one at a time.</p>
<div id="model" class="section level3">
<h3>Model</h3>
<p>We will use the below model throughout this article except in the
case of hierarchical selection. You can learn more about the data <a href="https://olsrr.rsquaredacademy.com/reference/surgical">here</a>.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">lm</span>(y <span class="sc">~</span> ., <span class="at">data =</span> surgical)</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="fu">summary</span>(model)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = y ~ ., data = surgical)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -285.36 -132.75  -10.00   89.48  790.12 
## 
## Coefficients:
##              Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) -1148.823    242.328  -4.741 2.17e-05 ***
## bcs            62.390     24.470   2.550 0.014258 *  
## pindex          8.973      1.874   4.788 1.86e-05 ***
## enzyme_test     9.888      1.742   5.677 9.39e-07 ***
## liver_test     50.413     44.959   1.121 0.268109    
## age            -0.951      2.649  -0.359 0.721231    
## gender         15.874     58.475   0.271 0.787269    
## alc_mod         7.713     64.956   0.119 0.906007    
## alc_heavy     320.697     85.070   3.770 0.000474 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 201.4 on 45 degrees of freedom
## Multiple R-squared:  0.7818, Adjusted R-squared:  0.7431 
## F-statistic: 20.16 on 8 and 45 DF,  p-value: 1.607e-12</code></pre>
</div>
<div id="model-specification" class="section level3">
<h3>Model specification</h3>
<p>Irrespective of the stepwise method being used, we have to specify
the full model i.e. all the variabels/predictors under consideration as
<code>olsrr</code> extracts the candidate variables for
selection/elimination from the model specified.</p>
<div id="forward-selection" class="section level5">
<h5>Forward selection</h5>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="co"># stepwise forward regression</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="fu">ols_step_forward_p</span>(model)</span></code></pre></div>
<pre><code>## 
## 
##                               Stepwise Summary                              
## --------------------------------------------------------------------------
## Step    Variable         AIC        SBC       SBIC        R2       Adj. R2 
## --------------------------------------------------------------------------
##  0      Base Model     802.606    806.584    646.794    0.00000    0.00000 
##  1      liver_test     771.875    777.842    616.009    0.45454    0.44405 
##  2      alc_heavy      761.439    769.395    605.506    0.56674    0.54975 
##  3      enzyme_test    750.509    760.454    595.297    0.65900    0.63854 
##  4      pindex         735.715    747.649    582.943    0.75015    0.72975 
##  5      bcs            730.620    744.543    579.638    0.78091    0.75808 
## --------------------------------------------------------------------------
## 
## Final Model Output 
## ------------------
## 
##                            Model Summary                            
## -------------------------------------------------------------------
## R                         0.884       RMSE                 184.276 
## R-Squared                 0.781       MSE                33957.712 
## Adj. R-Squared            0.758       Coef. Var             27.839 
## Pred R-Squared            0.700       AIC                  730.620 
## MAE                     137.656       SBC                  744.543 
## -------------------------------------------------------------------
##  RMSE: Root Mean Square Error 
##  MSE: Mean Square Error 
##  MAE: Mean Absolute Error 
##  AIC: Akaike Information Criteria 
##  SBC: Schwarz Bayesian Criteria 
## 
##                                  ANOVA                                  
## -----------------------------------------------------------------------
##                    Sum of                                              
##                   Squares        DF    Mean Square      F         Sig. 
## -----------------------------------------------------------------------
## Regression    6535804.090         5    1307160.818    34.217    0.0000 
## Residual      1833716.447        48      38202.426                     
## Total         8369520.537        53                                    
## -----------------------------------------------------------------------
## 
##                                       Parameter Estimates                                        
## ------------------------------------------------------------------------------------------------
##       model         Beta    Std. Error    Std. Beta      t        Sig         lower       upper 
## ------------------------------------------------------------------------------------------------
## (Intercept)    -1178.330       208.682                 -5.647    0.000    -1597.914    -758.746 
##  liver_test       58.064        40.144        0.156     1.446    0.155      -22.652     138.779 
##   alc_heavy      317.848        71.634        0.314     4.437    0.000      173.818     461.878 
## enzyme_test        9.748         1.656        0.521     5.887    0.000        6.419      13.077 
##      pindex        8.924         1.808        0.380     4.935    0.000        5.288      12.559 
##         bcs       59.864        23.060        0.241     2.596    0.012       13.498     106.230 
## ------------------------------------------------------------------------------------------------</code></pre>
</div>
<div id="backward-elimination" class="section level5">
<h5>Backward elimination</h5>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="co"># stepwise backward regression</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="fu">ols_step_backward_p</span>(model)</span></code></pre></div>
<pre><code>## 
## 
##                              Stepwise Summary                              
## -------------------------------------------------------------------------
## Step    Variable        AIC        SBC       SBIC        R2       Adj. R2 
## -------------------------------------------------------------------------
##  0      Full Model    736.390    756.280    586.665    0.78184    0.74305 
##  1      alc_mod       734.407    752.308    584.276    0.78177    0.74856 
##  2      gender        732.494    748.406    581.938    0.78142    0.75351 
##  3      age           730.620    744.543    579.638    0.78091    0.75808 
## -------------------------------------------------------------------------
## 
## Final Model Output 
## ------------------
## 
##                            Model Summary                            
## -------------------------------------------------------------------
## R                         0.884       RMSE                 184.276 
## R-Squared                 0.781       MSE                33957.712 
## Adj. R-Squared            0.758       Coef. Var             27.839 
## Pred R-Squared            0.700       AIC                  730.620 
## MAE                     137.656       SBC                  744.543 
## -------------------------------------------------------------------
##  RMSE: Root Mean Square Error 
##  MSE: Mean Square Error 
##  MAE: Mean Absolute Error 
##  AIC: Akaike Information Criteria 
##  SBC: Schwarz Bayesian Criteria 
## 
##                                  ANOVA                                  
## -----------------------------------------------------------------------
##                    Sum of                                              
##                   Squares        DF    Mean Square      F         Sig. 
## -----------------------------------------------------------------------
## Regression    6535804.090         5    1307160.818    34.217    0.0000 
## Residual      1833716.447        48      38202.426                     
## Total         8369520.537        53                                    
## -----------------------------------------------------------------------
## 
##                                       Parameter Estimates                                        
## ------------------------------------------------------------------------------------------------
##       model         Beta    Std. Error    Std. Beta      t        Sig         lower       upper 
## ------------------------------------------------------------------------------------------------
## (Intercept)    -1178.330       208.682                 -5.647    0.000    -1597.914    -758.746 
##         bcs       59.864        23.060        0.241     2.596    0.012       13.498     106.230 
##      pindex        8.924         1.808        0.380     4.935    0.000        5.288      12.559 
## enzyme_test        9.748         1.656        0.521     5.887    0.000        6.419      13.077 
##  liver_test       58.064        40.144        0.156     1.446    0.155      -22.652     138.779 
##   alc_heavy      317.848        71.634        0.314     4.437    0.000      173.818     461.878 
## ------------------------------------------------------------------------------------------------</code></pre>
</div>
</div>
<div id="criteria" class="section level3">
<h3>Criteria</h3>
<p>The criteria for selecting variables may be one of the following:</p>
<ul>
<li>p value</li>
<li>akaike information criterion (aic)</li>
<li>schwarz bayesian criterion (sbc)</li>
<li>sawa bayesian criterion (sbic)</li>
<li>r-square</li>
<li>adjusted r-square</li>
</ul>
</div>
<div id="includeexclude-variables" class="section level3">
<h3>Include/exclude variables</h3>
<p>We can force variables to be included or excluded from the model at
all stages of variable selection. The variables may be specified either
by name or position in the model specified.</p>
<div id="by-name" class="section level5">
<h5>By name</h5>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="fu">ols_step_forward_p</span>(model, <span class="at">include =</span> <span class="fu">c</span>(<span class="st">&quot;age&quot;</span>, <span class="st">&quot;alc_mod&quot;</span>))</span></code></pre></div>
<pre><code>## 
## 
##                               Stepwise Summary                               
## ---------------------------------------------------------------------------
## Step    Variable         AIC        SBC       SBIC        R2       Adj. R2  
## ---------------------------------------------------------------------------
##  0      Base Model     804.340    812.295    645.675    0.04110     0.00350 
##  1      age            803.834    809.801    646.572    0.01420    -0.00476 
##  2      alc_mod        804.340    812.295    645.675    0.04110     0.00350 
##  3      liver_test     772.922    782.867    615.246    0.48357     0.45258 
##  4      enzyme_test    763.665    775.599    606.382    0.58074     0.54652 
##  5      alc_heavy      754.332    768.255    598.224    0.66012     0.62471 
##  6      pindex         739.680    755.592    587.108    0.75031     0.71843 
## ---------------------------------------------------------------------------
## 
## Final Model Output 
## ------------------
## 
##                            Model Summary                            
## -------------------------------------------------------------------
## R                         0.866       RMSE                 196.724 
## R-Squared                 0.750       MSE                38700.429 
## Adj. R-Squared            0.718       Coef. Var             30.034 
## Pred R-Squared            0.649       AIC                  739.680 
## MAE                     146.418       SBC                  755.592 
## -------------------------------------------------------------------
##  RMSE: Root Mean Square Error 
##  MSE: Mean Square Error 
##  MAE: Mean Absolute Error 
##  AIC: Akaike Information Criteria 
##  SBC: Schwarz Bayesian Criteria 
## 
##                                  ANOVA                                  
## -----------------------------------------------------------------------
##                    Sum of                                              
##                   Squares        DF    Mean Square      F         Sig. 
## -----------------------------------------------------------------------
## Regression    6279697.346         6    1046616.224    23.538    0.0000 
## Residual      2089823.191        47      44464.323                     
## Total         8369520.537        53                                    
## -----------------------------------------------------------------------
## 
##                                       Parameter Estimates                                       
## -----------------------------------------------------------------------------------------------
##       model        Beta    Std. Error    Std. Beta      t        Sig         lower       upper 
## -----------------------------------------------------------------------------------------------
## (Intercept)    -814.092       213.222                 -3.818    0.000    -1243.041    -385.144 
##         age       0.458         2.706        0.013     0.169    0.866       -4.985       5.902 
##     alc_mod       1.088        67.941        0.001     0.016    0.987     -135.591     137.768 
##  liver_test     126.675        33.832        0.341     3.744    0.000       58.613     194.737 
## enzyme_test       7.523         1.543        0.402     4.874    0.000        4.418      10.628 
##   alc_heavy     361.751        87.140        0.357     4.151    0.000      186.448     537.053 
##      pindex       7.862         1.908        0.334     4.120    0.000        4.023      11.700 
## -----------------------------------------------------------------------------------------------</code></pre>
</div>
<div id="by-index" class="section level5">
<h5>By index</h5>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="fu">ols_step_forward_p</span>(model, <span class="at">include =</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">7</span>))</span></code></pre></div>
<pre><code>## 
## 
##                               Stepwise Summary                               
## ---------------------------------------------------------------------------
## Step    Variable         AIC        SBC       SBIC        R2       Adj. R2  
## ---------------------------------------------------------------------------
##  0      Base Model     804.340    812.295    645.675    0.04110     0.00350 
##  1      age            803.834    809.801    646.572    0.01420    -0.00476 
##  2      alc_mod        804.340    812.295    645.675    0.04110     0.00350 
##  3      liver_test     772.922    782.867    615.246    0.48357     0.45258 
##  4      enzyme_test    763.665    775.599    606.382    0.58074     0.54652 
##  5      alc_heavy      754.332    768.255    598.224    0.66012     0.62471 
##  6      pindex         739.680    755.592    587.108    0.75031     0.71843 
## ---------------------------------------------------------------------------
## 
## Final Model Output 
## ------------------
## 
##                            Model Summary                            
## -------------------------------------------------------------------
## R                         0.866       RMSE                 196.724 
## R-Squared                 0.750       MSE                38700.429 
## Adj. R-Squared            0.718       Coef. Var             30.034 
## Pred R-Squared            0.649       AIC                  739.680 
## MAE                     146.418       SBC                  755.592 
## -------------------------------------------------------------------
##  RMSE: Root Mean Square Error 
##  MSE: Mean Square Error 
##  MAE: Mean Absolute Error 
##  AIC: Akaike Information Criteria 
##  SBC: Schwarz Bayesian Criteria 
## 
##                                  ANOVA                                  
## -----------------------------------------------------------------------
##                    Sum of                                              
##                   Squares        DF    Mean Square      F         Sig. 
## -----------------------------------------------------------------------
## Regression    6279697.346         6    1046616.224    23.538    0.0000 
## Residual      2089823.191        47      44464.323                     
## Total         8369520.537        53                                    
## -----------------------------------------------------------------------
## 
##                                       Parameter Estimates                                       
## -----------------------------------------------------------------------------------------------
##       model        Beta    Std. Error    Std. Beta      t        Sig         lower       upper 
## -----------------------------------------------------------------------------------------------
## (Intercept)    -814.092       213.222                 -3.818    0.000    -1243.041    -385.144 
##         age       0.458         2.706        0.013     0.169    0.866       -4.985       5.902 
##     alc_mod       1.088        67.941        0.001     0.016    0.987     -135.591     137.768 
##  liver_test     126.675        33.832        0.341     3.744    0.000       58.613     194.737 
## enzyme_test       7.523         1.543        0.402     4.874    0.000        4.418      10.628 
##   alc_heavy     361.751        87.140        0.357     4.151    0.000      186.448     537.053 
##      pindex       7.862         1.908        0.334     4.120    0.000        4.023      11.700 
## -----------------------------------------------------------------------------------------------</code></pre>
</div>
</div>
<div id="standardized-output" class="section level3">
<h3>Standardized output</h3>
<p>All stepwise selection methods display standard output which
includes:</p>
<ul>
<li>selection summary</li>
<li>model summary</li>
<li>ANOVA</li>
<li>parameter estimates</li>
</ul>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="co"># adjusted r-square </span></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a><span class="fu">ols_step_forward_adj_r2</span>(model)</span></code></pre></div>
<pre><code>## 
## 
##                               Stepwise Summary                              
## --------------------------------------------------------------------------
## Step    Variable         AIC        SBC       SBIC        R2       Adj. R2 
## --------------------------------------------------------------------------
##  0      Base Model     802.606    806.584    646.794    0.00000    0.00000 
##  1      liver_test     771.875    777.842    616.009    0.45454    0.44405 
##  2      alc_heavy      761.439    769.395    605.506    0.56674    0.54975 
##  3      enzyme_test    750.509    760.454    595.297    0.65900    0.63854 
##  4      pindex         735.715    747.649    582.943    0.75015    0.72975 
##  5      bcs            730.620    744.543    579.638    0.78091    0.75808 
## --------------------------------------------------------------------------
## 
## Final Model Output 
## ------------------
## 
##                            Model Summary                            
## -------------------------------------------------------------------
## R                         0.884       RMSE                 184.276 
## R-Squared                 0.781       MSE                33957.712 
## Adj. R-Squared            0.758       Coef. Var             27.839 
## Pred R-Squared            0.700       AIC                  730.620 
## MAE                     137.656       SBC                  744.543 
## -------------------------------------------------------------------
##  RMSE: Root Mean Square Error 
##  MSE: Mean Square Error 
##  MAE: Mean Absolute Error 
##  AIC: Akaike Information Criteria 
##  SBC: Schwarz Bayesian Criteria 
## 
##                                  ANOVA                                  
## -----------------------------------------------------------------------
##                    Sum of                                              
##                   Squares        DF    Mean Square      F         Sig. 
## -----------------------------------------------------------------------
## Regression    6535804.090         5    1307160.818    34.217    0.0000 
## Residual      1833716.447        48      38202.426                     
## Total         8369520.537        53                                    
## -----------------------------------------------------------------------
## 
##                                       Parameter Estimates                                        
## ------------------------------------------------------------------------------------------------
##       model         Beta    Std. Error    Std. Beta      t        Sig         lower       upper 
## ------------------------------------------------------------------------------------------------
## (Intercept)    -1178.330       208.682                 -5.647    0.000    -1597.914    -758.746 
##  liver_test       58.064        40.144        0.156     1.446    0.155      -22.652     138.779 
##   alc_heavy      317.848        71.634        0.314     4.437    0.000      173.818     461.878 
## enzyme_test        9.748         1.656        0.521     5.887    0.000        6.419      13.077 
##      pindex        8.924         1.808        0.380     4.935    0.000        5.288      12.559 
##         bcs       59.864        23.060        0.241     2.596    0.012       13.498     106.230 
## ------------------------------------------------------------------------------------------------</code></pre>
</div>
<div id="visualization" class="section level3">
<h3>Visualization</h3>
<p>Use the <code>plot()</code> method to visualize variable selection.
It will display how the variable selection criteria changes at each step
of the selection process along with the variable selected.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="co"># adjusted r-square </span></span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a>k <span class="ot">&lt;-</span> <span class="fu">ols_step_forward_adj_r2</span>(model)</span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a><span class="fu">plot</span>(k)</span></code></pre></div>
<p><img role="img" src="data:image/png;base64,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" /><!-- --></p>
</div>
<div id="verbose-output" class="section level3">
<h3>Verbose output</h3>
<p>To view the detailed regression output at each stage of variable
selection/elimination, set <code>details</code> to <code>TRUE</code>. It
will display the following information at each step:</p>
<ul>
<li>step number</li>
<li>variable selected/eliminated</li>
<li>model</li>
<li>value of the criteria at that stage</li>
</ul>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="co"># adjusted r-square </span></span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a><span class="fu">ols_step_forward_adj_r2</span>(model, <span class="at">details =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## Forward Selection Method 
## ------------------------
## 
## Candidate Terms: 
## 
## 1. bcs 
## 2. pindex 
## 3. enzyme_test 
## 4. liver_test 
## 5. age 
## 6. gender 
## 7. alc_mod 
## 8. alc_heavy 
## 
## 
## Step     =&gt; 0 
## Model    =&gt; y ~ 1 
## Adj. R2  =&gt; 0 
## 
## Initiating stepwise selection... 
## 
##                        Table: Adding New Variables                        
## -------------------------------------------------------------------------
## Predictor      DF      AIC        SBC       SBIC        R2       Adj. R2  
## -------------------------------------------------------------------------
## liver_test      1    771.875    777.842    616.009    0.45454     0.44405 
## enzyme_test     1    782.629    788.596    626.220    0.33435     0.32154 
## pindex          1    794.100    800.067    637.196    0.17680     0.16097 
## alc_heavy       1    794.301    800.268    637.389    0.17373     0.15784 
## bcs             1    797.697    803.664    640.655    0.12010     0.10318 
## alc_mod         1    802.828    808.795    645.601    0.03239     0.01378 
## gender          1    802.956    808.923    645.725    0.03009     0.01143 
## age             1    803.834    809.801    646.572    0.01420    -0.00476 
## -------------------------------------------------------------------------
## 
## Step     =&gt; 1 
## Added    =&gt; liver_test 
## Model    =&gt; y ~ liver_test 
## Adj. R2  =&gt; 0.44405 
## 
##                       Table: Adding New Variables                        
## ------------------------------------------------------------------------
## Predictor      DF      AIC        SBC       SBIC        R2       Adj. R2 
## ------------------------------------------------------------------------
## alc_heavy       1    761.439    769.395    605.506    0.56674    0.54975 
## enzyme_test     1    762.077    770.033    606.090    0.56159    0.54440 
## pindex          1    770.387    778.343    613.737    0.48866    0.46861 
## alc_mod         1    771.141    779.097    614.435    0.48147    0.46113 
## gender          1    773.802    781.758    616.901    0.45528    0.43391 
## age             1    773.831    781.787    616.928    0.45498    0.43361 
## bcs             1    773.867    781.823    616.961    0.45462    0.43323 
## ------------------------------------------------------------------------
## 
## Step     =&gt; 2 
## Added    =&gt; alc_heavy 
## Model    =&gt; y ~ liver_test + alc_heavy 
## Adj. R2  =&gt; 0.54975 
## 
##                       Table: Adding New Variables                        
## ------------------------------------------------------------------------
## Predictor      DF      AIC        SBC       SBIC        R2       Adj. R2 
## ------------------------------------------------------------------------
## enzyme_test     1    750.509    760.454    595.297    0.65900    0.63854 
## pindex          1    756.125    766.070    600.225    0.62163    0.59892 
## bcs             1    763.063    773.008    606.379    0.56975    0.54394 
## age             1    763.110    773.055    606.421    0.56938    0.54354 
## alc_mod         1    763.428    773.373    606.704    0.56683    0.54084 
## gender          1    763.433    773.378    606.709    0.56679    0.54080 
## ------------------------------------------------------------------------
## 
## Step     =&gt; 3 
## Added    =&gt; enzyme_test 
## Model    =&gt; y ~ liver_test + alc_heavy + enzyme_test 
## Adj. R2  =&gt; 0.63854 
## 
##                      Table: Adding New Variables                       
## ----------------------------------------------------------------------
## Predictor    DF      AIC        SBC       SBIC        R2       Adj. R2 
## ----------------------------------------------------------------------
## pindex        1    735.715    747.649    582.943    0.75015    0.72975 
## bcs           1    750.782    762.716    595.377    0.66973    0.64277 
## alc_mod       1    752.403    764.337    596.743    0.65967    0.63189 
## age           1    752.416    764.350    596.755    0.65959    0.63180 
## gender        1    752.509    764.443    596.833    0.65900    0.63116 
## ----------------------------------------------------------------------
## 
## Step     =&gt; 4 
## Added    =&gt; pindex 
## Model    =&gt; y ~ liver_test + alc_heavy + enzyme_test + pindex 
## Adj. R2  =&gt; 0.72975 
## 
##                      Table: Adding New Variables                       
## ----------------------------------------------------------------------
## Predictor    DF      AIC        SBC       SBIC        R2       Adj. R2 
## ----------------------------------------------------------------------
## bcs           1    730.620    744.543    579.638    0.78091    0.75808 
## age           1    737.680    751.603    585.012    0.75030    0.72429 
## gender        1    737.712    751.635    585.036    0.75016    0.72413 
## alc_mod       1    737.713    751.636    585.037    0.75015    0.72413 
## ----------------------------------------------------------------------
## 
## Step     =&gt; 5 
## Added    =&gt; bcs 
## Model    =&gt; y ~ liver_test + alc_heavy + enzyme_test + pindex + bcs 
## Adj. R2  =&gt; 0.75808 
## 
##                      Table: Adding New Variables                       
## ----------------------------------------------------------------------
## Predictor    DF      AIC        SBC       SBIC        R2       Adj. R2 
## ----------------------------------------------------------------------
## age           1    732.494    748.406    581.938    0.78142    0.75351 
## gender        1    732.551    748.463    581.978    0.78119    0.75325 
## alc_mod       1    732.614    748.526    582.023    0.78093    0.75297 
## ----------------------------------------------------------------------
## 
## 
## No more variables to be added.
## 
## Variables Selected: 
## 
## =&gt; liver_test 
## =&gt; alc_heavy 
## =&gt; enzyme_test 
## =&gt; pindex 
## =&gt; bcs</code></pre>
<pre><code>## 
## 
##                               Stepwise Summary                              
## --------------------------------------------------------------------------
## Step    Variable         AIC        SBC       SBIC        R2       Adj. R2 
## --------------------------------------------------------------------------
##  0      Base Model     802.606    806.584    646.794    0.00000    0.00000 
##  1      liver_test     771.875    777.842    616.009    0.45454    0.44405 
##  2      alc_heavy      761.439    769.395    605.506    0.56674    0.54975 
##  3      enzyme_test    750.509    760.454    595.297    0.65900    0.63854 
##  4      pindex         735.715    747.649    582.943    0.75015    0.72975 
##  5      bcs            730.620    744.543    579.638    0.78091    0.75808 
## --------------------------------------------------------------------------
## 
## Final Model Output 
## ------------------
## 
##                            Model Summary                            
## -------------------------------------------------------------------
## R                         0.884       RMSE                 184.276 
## R-Squared                 0.781       MSE                33957.712 
## Adj. R-Squared            0.758       Coef. Var             27.839 
## Pred R-Squared            0.700       AIC                  730.620 
## MAE                     137.656       SBC                  744.543 
## -------------------------------------------------------------------
##  RMSE: Root Mean Square Error 
##  MSE: Mean Square Error 
##  MAE: Mean Absolute Error 
##  AIC: Akaike Information Criteria 
##  SBC: Schwarz Bayesian Criteria 
## 
##                                  ANOVA                                  
## -----------------------------------------------------------------------
##                    Sum of                                              
##                   Squares        DF    Mean Square      F         Sig. 
## -----------------------------------------------------------------------
## Regression    6535804.090         5    1307160.818    34.217    0.0000 
## Residual      1833716.447        48      38202.426                     
## Total         8369520.537        53                                    
## -----------------------------------------------------------------------
## 
##                                       Parameter Estimates                                        
## ------------------------------------------------------------------------------------------------
##       model         Beta    Std. Error    Std. Beta      t        Sig         lower       upper 
## ------------------------------------------------------------------------------------------------
## (Intercept)    -1178.330       208.682                 -5.647    0.000    -1597.914    -758.746 
##  liver_test       58.064        40.144        0.156     1.446    0.155      -22.652     138.779 
##   alc_heavy      317.848        71.634        0.314     4.437    0.000      173.818     461.878 
## enzyme_test        9.748         1.656        0.521     5.887    0.000        6.419      13.077 
##      pindex        8.924         1.808        0.380     4.935    0.000        5.288      12.559 
##         bcs       59.864        23.060        0.241     2.596    0.012       13.498     106.230 
## ------------------------------------------------------------------------------------------------</code></pre>
</div>
<div id="progress" class="section level3">
<h3>Progress</h3>
<p>To view the progress in the variable selection procedure, set
<code>progress</code> to <code>TRUE</code>. It will display the variable
being selected/eliminated at each step until there are no more candidate
variables left.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="co"># adjusted r-square </span></span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a><span class="fu">ols_step_forward_adj_r2</span>(model, <span class="at">progress =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## Forward Selection Method 
## ------------------------
## 
## Candidate Terms: 
## 
## 1. bcs 
## 2. pindex 
## 3. enzyme_test 
## 4. liver_test 
## 5. age 
## 6. gender 
## 7. alc_mod 
## 8. alc_heavy 
## 
## 
## Variables Entered: 
## 
## =&gt; liver_test 
## =&gt; alc_heavy 
## =&gt; enzyme_test 
## =&gt; pindex 
## =&gt; bcs 
## 
## No more variables to be added.</code></pre>
<pre><code>## 
## 
##                               Stepwise Summary                              
## --------------------------------------------------------------------------
## Step    Variable         AIC        SBC       SBIC        R2       Adj. R2 
## --------------------------------------------------------------------------
##  0      Base Model     802.606    806.584    646.794    0.00000    0.00000 
##  1      liver_test     771.875    777.842    616.009    0.45454    0.44405 
##  2      alc_heavy      761.439    769.395    605.506    0.56674    0.54975 
##  3      enzyme_test    750.509    760.454    595.297    0.65900    0.63854 
##  4      pindex         735.715    747.649    582.943    0.75015    0.72975 
##  5      bcs            730.620    744.543    579.638    0.78091    0.75808 
## --------------------------------------------------------------------------
## 
## Final Model Output 
## ------------------
## 
##                            Model Summary                            
## -------------------------------------------------------------------
## R                         0.884       RMSE                 184.276 
## R-Squared                 0.781       MSE                33957.712 
## Adj. R-Squared            0.758       Coef. Var             27.839 
## Pred R-Squared            0.700       AIC                  730.620 
## MAE                     137.656       SBC                  744.543 
## -------------------------------------------------------------------
##  RMSE: Root Mean Square Error 
##  MSE: Mean Square Error 
##  MAE: Mean Absolute Error 
##  AIC: Akaike Information Criteria 
##  SBC: Schwarz Bayesian Criteria 
## 
##                                  ANOVA                                  
## -----------------------------------------------------------------------
##                    Sum of                                              
##                   Squares        DF    Mean Square      F         Sig. 
## -----------------------------------------------------------------------
## Regression    6535804.090         5    1307160.818    34.217    0.0000 
## Residual      1833716.447        48      38202.426                     
## Total         8369520.537        53                                    
## -----------------------------------------------------------------------
## 
##                                       Parameter Estimates                                        
## ------------------------------------------------------------------------------------------------
##       model         Beta    Std. Error    Std. Beta      t        Sig         lower       upper 
## ------------------------------------------------------------------------------------------------
## (Intercept)    -1178.330       208.682                 -5.647    0.000    -1597.914    -758.746 
##  liver_test       58.064        40.144        0.156     1.446    0.155      -22.652     138.779 
##   alc_heavy      317.848        71.634        0.314     4.437    0.000      173.818     461.878 
## enzyme_test        9.748         1.656        0.521     5.887    0.000        6.419      13.077 
##      pindex        8.924         1.808        0.380     4.935    0.000        5.288      12.559 
##         bcs       59.864        23.060        0.241     2.596    0.012       13.498     106.230 
## ------------------------------------------------------------------------------------------------</code></pre>
</div>
<div id="hierarchical-selection" class="section level3">
<h3>Hierarchical selection</h3>
<p>When using <code>p</code> values as the criterion for
selecting/eliminating variables, we can enable hierarchical selection.
In this method, the search for the most significant variable is
restricted to the next available variable. In the below example, as
<code>liver_test</code> does not meet the threshold for selection, none
of the variables after <code>liver_test</code> are considered for
further selection i.e. the stepwise selection ends as soon as it comes
across a variable that does not meet the selection threshold. You can
learn more about hierachichal selection <a href="https://www.stata.com/manuals/rstepwise.pdf">here</a>.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="co"># hierarchical selection</span></span>
<span id="cb24-2"><a href="#cb24-2" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">lm</span>(y <span class="sc">~</span> bcs <span class="sc">+</span> alc_heavy <span class="sc">+</span> pindex <span class="sc">+</span> enzyme_test <span class="sc">+</span> liver_test <span class="sc">+</span> age <span class="sc">+</span> gender <span class="sc">+</span> alc_mod, <span class="at">data =</span> surgical)</span>
<span id="cb24-3"><a href="#cb24-3" tabindex="-1"></a><span class="fu">ols_step_forward_p</span>(m, <span class="fl">0.1</span>, <span class="at">hierarchical =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## 
## 
##                               Stepwise Summary                              
## --------------------------------------------------------------------------
## Step    Variable         AIC        SBC       SBIC        R2       Adj. R2 
## --------------------------------------------------------------------------
##  0      Base Model     802.606    806.584    646.794    0.00000    0.00000 
##  1      bcs            797.697    803.664    640.655    0.12010    0.10318 
##  2      alc_heavy      791.701    799.657    633.668    0.24119    0.21144 
##  3      pindex         778.574    788.519    620.390    0.42659    0.39218 
##  4      enzyme_test    730.924    742.858    579.087    0.77136    0.75269 
## --------------------------------------------------------------------------
## 
## Final Model Output 
## ------------------
## 
##                            Model Summary                            
## -------------------------------------------------------------------
## R                         0.878       RMSE                 188.249 
## R-Squared                 0.771       MSE                35437.709 
## Adj. R-Squared            0.753       Coef. Var             28.147 
## Pred R-Squared            0.695       AIC                  730.924 
## MAE                     140.619       SBC                  742.858 
## -------------------------------------------------------------------
##  RMSE: Root Mean Square Error 
##  MSE: Mean Square Error 
##  MAE: Mean Absolute Error 
##  AIC: Akaike Information Criteria 
##  SBC: Schwarz Bayesian Criteria 
## 
##                                  ANOVA                                  
## -----------------------------------------------------------------------
##                    Sum of                                              
##                   Squares        DF    Mean Square      F         Sig. 
## -----------------------------------------------------------------------
## Regression    6455884.265         4    1613971.066    41.327    0.0000 
## Residual      1913636.272        49      39053.801                     
## Total         8369520.537        53                                    
## -----------------------------------------------------------------------
## 
##                                       Parameter Estimates                                        
## ------------------------------------------------------------------------------------------------
##       model         Beta    Std. Error    Std. Beta      t        Sig         lower       upper 
## ------------------------------------------------------------------------------------------------
## (Intercept)    -1334.424       180.589                 -7.389    0.000    -1697.332    -971.516 
##         bcs       81.439        17.781        0.329     4.580    0.000       45.706     117.171 
##   alc_heavy      312.777        72.341        0.309     4.324    0.000      167.402     458.152 
##      pindex       10.131         1.622        0.431     6.246    0.000        6.871      13.390 
## enzyme_test       11.243         1.308        0.601     8.596    0.000        8.614      13.871 
## ------------------------------------------------------------------------------------------------</code></pre>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
